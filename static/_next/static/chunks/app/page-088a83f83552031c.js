(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{28:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>g});var a=l(5155),s=l(2115),r=l(5695);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,l)=>l?l.toUpperCase():t.toLowerCase()),c=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return t.filter((e,t,l)=>!!e&&""!==e.trim()&&l.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,s.forwardRef)((e,t)=>{let{color:l="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:c,iconNode:m,...h}=e;return(0,s.createElement)("svg",{ref:t,...u,width:a,height:a,stroke:l,strokeWidth:n?24*Number(r)/Number(a):r,className:i("lucide",o),...!c&&!d(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,l]=e;return(0,s.createElement)(t,l)}),...Array.isArray(c)?c:[c]])}),h=((e,t)=>{let l=(0,s.forwardRef)((l,a)=>{let{className:r,...o}=l;return(0,s.createElement)(m,{ref:a,iconNode:t,className:i("lucide-".concat(n(c(e))),"lucide-".concat(e),r),...o})});return l.displayName=c(e),l})("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function x(e){let{links:t,toggleStatus:l,deleteLink:r}=e,[n,o]=(0,s.useState)(""),[c,i]=(0,s.useState)("all"),d=t.filter(e=>{let t=e.domain.toLowerCase().includes(n.toLowerCase()),l="all"===c||"safe"===c&&e.is_safe||"unsafe"===c&&!e.is_safe||"blocked"===c&&e.is_blocked||"unblocked"===c&&!e.is_blocked;return t&&l});return(0,a.jsxs)("div",{className:"max-w-5xl w-full mx-auto p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-stretch gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search domain...",className:"input input-bordered w-full md:w-64",value:n,onChange:e=>o(e.target.value)}),(0,a.jsxs)("select",{className:"select select-bordered w-full md:w-40",value:c,onChange:e=>i(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"safe",children:"Safe"}),(0,a.jsx)("option",{value:"unsafe",children:"Unsafe"}),(0,a.jsx)("option",{value:"blocked",children:"Blocked"}),(0,a.jsx)("option",{value:"unblocked",children:"Unblocked"})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto bg-base-200 rounded-xl shadow-xl",children:(0,a.jsxs)("table",{className:"table table-zebra w-full text-sm md:text-base",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-base-300 text-base font-semibold",children:[(0,a.jsx)("th",{children:"Domain"}),(0,a.jsx)("th",{children:"URL"}),(0,a.jsx)("th",{className:"text-center",children:"Status"}),(0,a.jsx)("th",{className:"text-center",children:"Blocked"}),(0,a.jsx)("th",{className:"text-center",children:"Action"}),(0,a.jsx)("th",{className:"text-center",children:"Delete"})]})}),(0,a.jsx)("tbody",{children:d.length>0?d.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"truncate font-medium text-white max-w-[180px]",children:e.domain}),(0,a.jsx)("td",{className:"truncate text-gray-400 max-w-[220px]",title:e.url,children:e.url.length>30?"".concat(e.url.slice(0,30),"..."):e.url}),(0,a.jsx)("td",{className:"text-center",children:(0,a.jsx)("span",{className:"badge badge-sm ".concat(e.is_safe?"badge-success":"badge-warning"),children:e.is_safe?"Safe":"Unknown"})}),(0,a.jsx)("td",{className:"text-center",children:(0,a.jsx)("span",{className:"badge badge-sm ".concat(e.is_blocked?"badge-error":"badge-success"),children:e.is_blocked?"Blocked":"Unblocked"})}),(0,a.jsx)("td",{className:"text-center",children:(0,a.jsxs)("label",{className:"cursor-pointer flex items-center justify-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",className:"toggle toggle-sm",checked:!e.is_blocked,onChange:()=>l(e.url)}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.is_blocked?"Blocked":"Allowed"})]})}),(0,a.jsx)("td",{className:"text-center",children:(0,a.jsx)("button",{className:"btn btn-ghost btn-xs text-error",onClick:()=>r(e.url),title:"Delete",children:(0,a.jsx)(h,{size:16})})})]},t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"text-center py-4 text-gray-400",children:"No links match your filter."})})})]})})]})}var p=l(3464);function f(e){let{username:t,profileImage:l,email:n}=e,o=(0,r.useRouter)(),[c,i]=(0,s.useState)(""),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(!1),x=()=>{let e=localStorage.getItem("authToken");return e||o.push("/login"),e},f=()=>{localStorage.removeItem("authToken"),o.push("/login")},b=async()=>{let e=x();if(e)try{let t=await fetch("http://localhost:5000/api/v1/delete-account",{method:"POST",headers:{Authorization:e,authToken:e,"Content-Type":"application/json"}});200===t.status?(alert("Account deleted successfully."),f()):alert("Failed to delete account.")}catch(e){console.error("Delete Error:",e),alert("An error occurred. Please try again.")}},g=async e=>{e.preventDefault(),h(!0),u(null);try{let e=await p.A.post("http://127.0.0.1:5000/api/v1/check",{url:c},{headers:{Authorization:x(),authToken:x(),"Content-Type":"application/json"}});u(e.data.is_safe?"✅ Safe":"⚠️ Unsafe"),console.log("Check result:",e.data)}catch(e){var t;console.error("Check error:",e),(null==(t=e.response)?void 0:t.status)===401?f():u("❌ Error checking URL")}finally{h(!1)}};return(0,a.jsxs)("div",{className:"navbar bg-base-100 shadow-md px-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("span",{className:"btn btn-ghost text-xl",children:"Phish Detector"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"btn btn-neutral btn-sm",onClick:()=>document.getElementById("my_modal_5").showModal(),children:"URL Check"}),(0,a.jsx)("a",{href:"/extension.zip",download:!0,target:"_blank",className:"btn btn-primary btn-sm",children:"Download"}),(0,a.jsx)("div",{className:"btn btn-ghost btn-circle avatar",onClick:()=>document.getElementById("profile-model").showModal(),children:(0,a.jsx)("div",{className:"w-10 rounded-full",children:(0,a.jsx)("img",{src:l||"https://static.vecteezy.com/system/resources/previews/018/765/757/original/user-profile-icon-in-flat-style-member-avatar-illustration-on-isolated-background-human-permission-sign-business-concept-vector.jpg",alt:"profile"})})})]}),(0,a.jsx)("dialog",{id:"my_modal_5",className:"modal modal-bottom sm:modal-middle",children:(0,a.jsxs)("form",{className:"modal-box",onSubmit:g,children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Check a URL"}),(0,a.jsx)("input",{type:"text",className:"input input-bordered w-full",placeholder:"https://example.com",value:c,onChange:e=>i(e.target.value),required:!0}),d&&(0,a.jsx)("p",{className:"mt-3 font-semibold text-center",children:d}),(0,a.jsxs)("div",{className:"modal-action",children:[(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Checking...":"Check"}),(0,a.jsx)("button",{type:"button",className:"btn",onClick:()=>{var e,t;null==(e=document.getElementById("my_modal_5"))||e.close(),null==(t=document.getElementById("profile-model"))||t.close(),i(""),u(null)},children:"Close"})]})]})}),(0,a.jsx)("dialog",{id:"profile-model",className:"modal modal-bottom sm:modal-middle",children:(0,a.jsxs)("div",{className:"modal-box",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Profile"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"avatar",children:(0,a.jsx)("div",{className:"w-20 rounded-full",children:(0,a.jsx)("img",{src:l||"https://static.vecteezy.com/system/resources/previews/018/765/757/original/user-profile-icon-in-flat-style-member-avatar-illustration-on-isolated-background-human-permission-sign-business-concept-vector.jpg",alt:"profile"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:t||"User"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:n||"someone@example.com"})]})]}),(0,a.jsxs)("div",{className:"modal-action",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-error",onClick:()=>{confirm("Are you sure you want to delete your account?")&&b()},children:"Delete Account"}),(0,a.jsx)("button",{type:"button",className:"btn",onClick:f,children:"Logout"})]})]})})]})}let b=e=>{try{let t=JSON.parse(atob(e.split(".")[1]));return{username:t.username||"",email:t.email||"",profileImage:t.profileImage||""}}catch(e){return{username:"",email:"",profileImage:""}}};function g(){let e=(0,r.useRouter)(),[t,l]=(0,s.useState)([]),[n,o]=(0,s.useState)(null),[c,i]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),p=()=>{let t=localStorage.getItem("authToken");return t||e.push("/login"),t},g=async()=>{let t=p();if(t)try{let a=await fetch("http://127.0.0.1:5000/api/v1/urls",{headers:{authToken:t}});if(!a.ok){o("Failed to fetch links. Please log in again."),e.push("/login");return}let s=await a.json();l(s)}catch(e){console.error("Error fetching links:",e),o("An error occurred while fetching links.")}},j=async e=>{let t=p();if(t)try{(await fetch("http://localhost:5000/api/v1/block-toggle",{method:"POST",headers:{"Content-Type":"application/json",authToken:t,Authorization:"Bearer ".concat(t)},body:JSON.stringify({url:e})})).ok?g():o("Failed to update link status.")}catch(e){console.error("Error updating link status:",e),o("An error occurred while updating the link status.")}},k=async e=>{let t=p();if(t)try{(await fetch("http://localhost:5000/api/v1/delete-url",{method:"POST",headers:{"Content-Type":"application/json",authToken:t,Authorization:"Bearer ".concat(t)},body:JSON.stringify({url:e})})).ok?g():o("Failed to delete the URL.")}catch(e){console.error("Error deleting URL:",e),o("An error occurred while deleting the URL.")}};return(0,s.useEffect)(()=>{let e=p();if(e){let{username:t,email:l,profileImage:a}=b(e);i(t),u(l),h(a)}g();let t=setInterval(g,5e3);return()=>clearInterval(t)},[e]),(0,a.jsx)("main",{"data-theme":"dracula",className:"flex min-h-screen flex-col items-center justify-between p-6 bg-base-200",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[n&&(0,a.jsx)("p",{className:"text-red-500",children:n}),(0,a.jsxs)("div",{className:"w-full max-w-4xl",children:[(0,a.jsx)(f,{username:c,email:d,profileImage:m}),(0,a.jsx)(x,{links:t,toggleStatus:j,deleteLink:k})]})]})})}},8706:(e,t,l)=>{Promise.resolve().then(l.bind(l,28))}},e=>{var t=t=>e(e.s=t);e.O(0,[794,441,684,358],()=>t(8706)),_N_E=e.O()}]);